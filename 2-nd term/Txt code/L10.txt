/*Разработать программу, реализующую рекурсивную функцию подсчета количества разбиений натурального числа m в виде суммы натуральных чисел.*/
#include <iostream>
#include <ctime>
#include <conio.h>
using namespace std;

long int R(short, short);

int main(void)
{
	setlocale(0, "");
	short number;
	short maxSummand;
	cout << "Введите натуральное число: "; cin >> number;
	cout << "Введите максимальное натуральное слагаемое в сумме: "; cin >> maxSummand;
	cout << "Натуральное число " << number << " разбивалось в виде суммы с максимальным натуральным слагаемым " << maxSummand << '.' << endl;
	clock_t time = clock();
	cout << "Количесвто разбиений: " << R(number, maxSummand) << endl;
	cout << "Время выполнения алгоритма: " << (clock() - time)/1000.0 << " c.";
	_getch();
	return 0;
}

long int R(short n, short k)
{
	if (n == 1 || k == 1)
		return 1;

	if (n <= k)
		return R(n, n - 1) + 1;

	return R(n, k - 1) + R(n - k, k);
}

/*
Пусть зависимость R(n,k) вычисляет количество разбиений числа n на сумму слагаемых, не превосходящих k.

Если рассматриваемое число равно 1, то при любом натуральном значении второго параметра разбиение также единственно: R(1,k)=1.

Если в сумме все слагаемые не превосходят 1, то такое представление единственно, то есть R(n,1)=1.

Если в сумму входит слагаемое, равное первому параметру, то такое представление также единственно (содержит только это слагаемое), поэтому имеет место равенство: R(n,n)=R(n,n-1)+1.

Если второй параметр превосходит значение первого , то имеет место равенство R(n,k)=R(n,n)=R(n,n-1)+1, так как для представления натурального числа в сумму не могут входить числа, превосходящие его.

Если n>k, то необходимо разбить все представления числа n на непересекающиеся разложения: в одни обязательно будет входить слагаемое k, а другие суммы не содержат k. 
Первая группа сумм, содержащая k, эквивалентна зависимости R(n-k,k), что следует после вычитания числа k из каждой суммы. 
Вторая группа сумм содержит разбиение числа n на слагаемые, каждое из которых не превосходит k-1, то есть число таких представлений равно R(n,k-1).
Так как обе группы сумм не пересекаются, то R(n,k)=R(n-k,k)+R(n,k-1).
*/